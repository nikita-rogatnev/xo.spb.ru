=== WooMS ===
Contributors: casepress
Donate link: https://wpcraft.ru/product/wooms-extra/
Tags: moysklad, woocommerce, sync, integration
Requires at least: 4.0
Tested up to: 4.9.4
Stable tag: 4.3
Requires PHP: 5.6
License: GPLv2 or later
License URI: http://www.gnu.org/licenses/gpl-2.0.html

MoySklad (moysklad.ru) and WooCommerce - sync, integration, connection

== Description ==

Integration WooCommerce & MoySklad http://moysklad.ru (for Russia)

Интеграция приложения МойСклад (торговля, опт, розница, склад, производство, CRM) и WooCommerce (WordPress)

Особенности:

*   Синхронизация товаров по протоколу REST API
*   Загрузка категорий
*   Загрузка картинок
*   Простые настройки


[Инструкция по правильному запуску Интернет магазина на базе WordPress & WooCommerce](https://wpcraft.ru/2017/internet-magazin-na-wordpress-woocommerce-storefront-mojsklad/)

Для больших возможностей можно приобрести расширенную версию https://wpcraft.ru/product/wooms-extra/

Исходники https://github.com/wpcraft-ru/wooms/ (для желающих принять участие в разработке)

По вопросам доработки [https://github.com/wpcraft-ru/wooms/issues](https://github.com/wpcraft-ru/wooms/issues)
Плагин спроектирован таким образом, что относительно просто позволяет дорабатывать механику под задачи и автоматизацию конкретного магазина/каталога.

== Installation ==

This section describes how to install the plugin and get it working.

e.g.

1. Upload plugin to the `/wp-content/plugins/` directory
1. Activate the plugin through the 'Plugins' menu in WordPress
1. Go to Settings / MoySklad and setup
1. Got to Tools / MoySklad and run sync

== Frequently Asked Questions ==

= Какие товары синхронизируются? =

По умолчанию только с артикулами. Чтобы можно было синхронизировать товары МойСклад и сайта без удаления.
Но если включить опцию UUID, то товары можно синхронизировать без артикула. В этом случае придется сначала удалить продукты с сайта.

= Что нужно чтобы синхронизация заработала? =

Нужно правильно указать реквизиты доступа на странице настроек плагина в панели управления сайтом. На стороне МойСклад ничего делать не нужно.

= Как устроен механизм синхронизации? =

Используется протокол REST API. Без протокола CommerceML. Вся логика находится на стороне сайта и сайт сам запрашиует данные из МойСклад.
В зависимости от особенностей конфигурации сервера бот синхронизации может зависать из-за таймаутов. Для этого в плагине встроен супервайзер, который следит за ботом и пинает его в случае остановки.

= Какие минимальные требования? =

WordPress 4.5
WooCommerce 3.0 - мб будет работать на Woo 2.х но не факт.
PHP 5.6


== Screenshots ==

1. Страница настроек.
2. Страница управления

== Changelog ==

= 5.2 =
* улучшен механизм скрытия старых продуктов
* XT: добавлена опция передачи склада в Заказах https://github.com/wpcraft-ru/wooms/issues/162
* XT: переработан механизм отправки заказов - стало проще, надежней, снижена нагрузка на БД
* XT: добавлена опция ручной отправки Заказа в МойСклад при сохранении
* XT: теперь можно менять состав заказа и повторно отправлять данные в МойСклад - с изменениями (например если клиент попросил поменять состав заказа)
* XT: добавлен лог изменения цены вариации

= 5.1 =
* импорт товаров/продуктов стал надежней
* XT: импорт вариаций/модификаций стал надежней
* XT: добавлена тест опция синхронизации отдельного продукта
* XT: исправлена ошибка обмена остатками при выборе склада

= 5.0 =
* улучшена работа волкера с учетом риска пропуска части продуктов
* данные об ошибках из состояния переведны в журнал
* выбор группы перенесен в XT версию https://github.com/wpcraft-ru/wooms/issues/151
* XT: имена файлов приведены к более понятному и единому стилю

= 4.12 =
* улучшения по журналу/логу данных для запросов
* улучшено сообщение о проблеме при выборе группы синхронизации
* удален старый метод запросов
* XT: заменены старые методы запроса данных
* XT: улучшения по обмену вариаций
* XT: улучшения лога данных по остаткам
* XT: исправлено сохранение кастомных цен для вариаций

= 4.11 =
* загрузка картинок - добавлен метод проверки названия файла
* улучшения по журналу/логу данных
* XT: исправлен выбор специальных цен для вариаций
* XT: добавлена поддержка выбора юр лиц для Заказов

= 4.10 =
* рефакторинг
* улучшено скрытие основных продуктов и вариаций
* XT: исправлены некоторые ошибки скрытия вариаций

= 4.9 =
* рефакторинг
* улучшена читаемость логов
* улучшили выбор групп для фильтрации с большими каталогами
* XT: исправлены ошибки синхронизации атрибутов у вариаций

= 4.8 =
* исправлена ошибка: CRITICAL Uncaught Error: Call to undefined function wp_read_image_metadata()
* XT: сделали понятней настройку передачи статуса заказов
* XT: глобальный рефакторинг передачтиков статуса заказов
* XT: починили вывод статуса автонастройки вебхука на стороне МойСклад

= 4.7 =
* журнал данных переписали на типовой WooCommerce
* XT: исправлена ошибка синхронизации цены распродажи у вариаций
* XT: теперь синхронизация вариаций запускается сразу после финиша основных продуктов без необходимости ручного запуска

= 4.6 =
* первая версия таблицы логирования
* XT: исправлена ошибка дублирования терминов в обших атрибутах при работе с вариациями
* XT: продукт снова становится простым если отключить опцию работы с вариациями
* XT: продукт становится простым если убрали модификации на стороне МойСклад

= 4.5 =
* исправлено скрытие опции выбора группы если отключена синхронизация категорий
* XT: исправлены ошибки обмена остатков по вариациям

= 4.4 =
* добавлена опция отключения скрытия продуктов из каталога
* XT: улучшена связка общих атрибутов с доп полями и вариациями МойСклад

= 4.3 =
* улучшена работа сокрытия старых продуктов
* добавлен автопересчет счетчиков для скрытия пустых категорий
* исправлена ошибка скрытия отсутствующих продуктов
* удален механизм скрытия продуктов если цена = 0
* XT: улучшена работа учета остатков по складу

= 4.2 =
* XT: при 0 остатке предзаказ теперь с уведомлением клиента
* XT: добавлен синк доп полей как общих атрибутов. например Бренд
* улучшена обработка ошибки логина и пароля доступа к МойСклад

= 4.1 =
* XT: улучшена связь статусов между системами
* XT: исправлены мелкие ошибки

= 4.0 =
* XT: добавлена опция обмена остатками без учета резерва
* улучшено уведомление о необходимости базовой версии плагина
* удален старый файл работы с кроном

= 3.9 =
* исправлена ошибка создания таблицы логгера при активации
* XT: улучшена работа с указанием Статуса для новых Заказов

= 3.8 =
* исправлена ошибка с картинками
* рефакторинг

= 3.7 =
* исправлена ошибка со стартом синка при некоторых опциях с вариациями
* исправлена ошибка с проверкой таблицы логов
* XT: исправлена ошибка с сохранением цен распродажи

= 3.6 =
* рефакторинг
* XT: фикс ошибки скрытия товаров и остатков при отключенной опции

= 3.5 =
* Обязательно обновление WooMS XT до версии 3.5 https://wpcraft.ru/my
* Хук для исключения импорта продуктов по выбранным папкам https://github.com/wpcraft-ru/wooms/issues/36
* Добавлен логгер ошибок и событий обмена https://github.com/wpcraft-ru/wooms/issues/110
* Снижение нагрузки на БД
* Рефакторинг кода
* Опция выбора группы для импорта товаров перенесен в базовый плагин

= 3.4 =
* Перенос страниц настроек и управления под единую страницу https://github.com/wpcraft-ru/wooms/issues/100
* XT: Мелкие правки по настройкам статусов

= 3.3 =
* XT: Опция выбора связки Статусов между Сайтов и Складом https://github.com/wpcraft-ru/wooms/issues/99

= 3.2 =
* XT: передача статусов Заказов из Сайта в МойСклад

= 3.0.1 =
* Добавлен $args для лучшей отладки метода wooms_request
* XT: Поправлена проблема с веб хуками обмена Статуса Заказов

= 3.0.0 =
* Переход на новую синхронную нумерацию версий с WooMS XT
* XT: Добавлена поддержка кастомных полей и атрибутов на основе их

= 2.1.2 =
* Обновлены сообщения для метабоксов товаров и рубрик
* Обновлен код класса WooMS_Import_Product_Images
* Добавлена блокировка кнопки ручного ипорта изображений, если не закончена сессия основной синхронизации товаров
* Добавлена настройка перезаписи изображений товаров
* Поддержка WC 3.5.0

= 2.1.1 =
* Добавлен хук wooms_walker_start
* Добавлен фильтр wooms_skip_update_select_category для пропуска обновлений
* Изменены аргументы при скрытии товаров
* Исправлены предупреждения о несуществующих переменных

= 2.1.0 =
* Добавлено обновление структуры каталогов при ее изменении в МойСклад
* Добавлена дополнительная настройка для синхронизации описаний продуктов на сайте
* Добавлен фильтр wooms_added_description
* Добавлены мета со значением последнего обновления в МойСклад

= 2.0.15 =
* Изменен код вывода метабоксов в товарах
* Добавлена информация о категории из МС в категориях
* Добавлена ссылка на расширенную версию в списке плагинов
* Добавлено скрытие товаров с нулевой ценой при синхронизации

= 2.0.14 =
* Добавлены информационные метабоксы для товаров, заказов и категорий

= 2.0.13 =
* Изменен функционал обновления товаров при синхронизации

= 2.0.12 =
* Проверка и уведомлени о новой версии WooMS XT если установлена

= 2.0.11 =
* Добавлен хук для функционала скрытия вариаций

= 2.0.10 =
* Изменены приоритеты вывода настроек

= 2.0.9 =
* Исправлена ошибка обновления параметра count при создании родительской рубрики
* Добавлена ссылка на улучшения и запросы

= 2.0.8 =
* Добавлен функционал изменения статуса товара на "Нет в наличии", если товара нет на складе
* Добавлен функционал автоматического добавления родительской категории после синхронизации из группы

= 2.0.7 =
* Восстановлена работа опции базового типа цен

= 2.0.6 =
* Добавлен сброс типа продукта, если отключили опцию вариаций

= 2.0.5 =
* Добавлена проверка на версию PHP и версию WordPress
* Добавлена проверка на активность WooCommerce
* Добавлены константы с версией и именем плагина

= 2.0.4 =
* Добавлены хуки в нотисы основного волкера

= 2.0.3 =
* Сделан реверс настроек, группы синхронизарится по умолчанию

= 2.0.2.1 =
* Обновлена обертка для работы с API

= 2.0.2 =
* Добавлена опция выбора цен

= 2.0.1 =
* Добавлена улучшенная обертка для работы с API

= 2.0.0 =
* Добавлена механика сессий и отключения старых продуктов

= 1.8.2 =
* Добавлен автосброс управления запасами при отключении опции

= 1.7.8 =
* Исправлена ошибка в синхронизации категорий продуктов

= 1.7.7 =
* Изменения инструкций
* Добавлен автосброс наличия продуктов при отсутствии управления остатками

= 1.7.1 =
* Переработан механизм блокировки расписания и конфликт с ручным стартом

= 1.6.5 =
* Разнесена блокировка синхронизации на ручную и по расписанию

= 1.6.4 =
* Исправлен фальшстарт при отключенной опции

= 1.6 =
* Переписан перебор данных на более надежную схему с меньшей нагрузкой на хостинг
* Рефакторинг кода и упрощение. Меньше механизмов и точек отказа
* Улучшен интерфейс о статусе обработок и результатах

= 1.5 =
* Добавлена синхронизация картинок
* Улучшен вывод ошибок и исключений
* Мелкие улучшения

= 1.4 =
* Добавлена ссылка на Настройки в список плагинов

= 1.3 =
* Добавлен хук do_action('woomss_tool_actions_' . $_GET['a']); для безконфлитного подключения ручных операций в Инструментах

= 1.1 =
* Исправлены мелкие ошибки
* Дополнена инструкция readme.txt для плагина
* Добавлен ряд хуков для расширения функционала и контроля поведения механизмов

= 1.0 =
* Рабочая версия
* Добавлен супервайзер для стимуляции бота в случае засыпания

= 0.9.6 =
* Add supervisor
